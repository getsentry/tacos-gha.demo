name: Terraform Plan

on:
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  plan:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      
      - name: Plan
        uses: gruntwork-io/terragrunt-action@v2
        continue-on-error: true
        id: plan
        with:
            tg_version: 'v0.53.5'
            tf_version: '1.6.4'
            tg_dir: ./terraform/env
            tg_command: 'run-all plan -out plan'
            tg_comment: true
