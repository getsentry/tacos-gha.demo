name: Terraform Lock

on:
  pull_request:
    types: [opened, synchronize, reopened]

defaults:
  run:
    shell: env ./lib/ci/default-shell {0}

env:
  # NOTE: please keep these in sync with ../../.terra*-version
  tf_version: "1.6.4"
  tg_version: "0.53.5"
  working_dir: "."
  deploy_environ: "dev"
  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
  GETSENTRY_SAC_VERB: apply

jobs:
  lock:
    uses: getsentry/tacos-gha/.github/workflows/terraform_lock.yml@bukzor/import-workflows
    with:
      tacos_gha_ref: refs/heads/bukzor/import-workflows
